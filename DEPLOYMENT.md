# JobLink Deployment Guide

## üöÄ Quick Deployment Checklist

### ‚úÖ Pre-Deployment Checks
- [x] All tests passing (11/11 tests)
- [x] No console.log statements in production code
- [x] Environment variables configured
- [x] Database migrations ready
- [x] CORS configured for production
- [x] JWT authentication working
- [x] Error handling implemented
- [x] .gitignore configured

---

## üì¶ Backend Deployment (Render)

### 1. Prerequisites
- GitHub account with repository
- Render account (free tier available)
- PostgreSQL database

### 2. Environment Variables Required

Add these in Render Dashboard ‚Üí Environment:

```bash
# Required
DATABASE_URL=<auto-generated-by-render>
SECRET_KEY=<auto-generated-by-render>
JWT_SECRET_KEY=<auto-generated-by-render>
FLASK_ENV=production

# Optional (for full functionality)
CLOUDINARY_CLOUD_NAME=your-cloudinary-name
CLOUDINARY_API_KEY=your-cloudinary-key
CLOUDINARY_API_SECRET=your-cloudinary-secret

SENDGRID_API_KEY=your-sendgrid-key
FROM_EMAIL=noreply@yourapp.com

MPESA_CONSUMER_KEY=your-mpesa-key
MPESA_CONSUMER_SECRET=your-mpesa-secret
MPESA_SHORTCODE=your-shortcode
MPESA_PASSKEY=your-passkey
MPESA_CALLBACK_URL=https://your-backend-url.onrender.com/api/payments/callback
```

### 3. Deployment Steps

1. **Push to GitHub:**
   ```bash
   git init
   git add .
   git commit -m "Initial commit"
   git branch -M main
   git remote add origin https://github.com/YOUR_USERNAME/JOBLINK.git
   git push -u origin main
   ```

2. **Create Render Service:**
   - Go to [render.com](https://render.com)
   - Click "New +" ‚Üí "Web Service"
   - Connect your GitHub repository
   - Select the `JOBLINK` repository
   - Configure:
     - **Name:** joblink-backend
     - **Root Directory:** `backend`
     - **Environment:** Python 3
     - **Build Command:** `pip install -r requirements.txt && python init_db.py`
     - **Start Command:** `gunicorn -c gunicorn_config.py 'app:create_app()'`

3. **Create PostgreSQL Database:**
   - In Render Dashboard ‚Üí "New +" ‚Üí "PostgreSQL"
   - Name: joblink-db
   - Link to your web service

4. **Deploy:**
   - Render will automatically deploy
   - Check logs for any errors
   - Your backend URL: `https://joblink-backend.onrender.com`

---

## üåê Frontend Deployment (Vercel)

### 1. Prerequisites
- Vercel account (free tier available)
- Backend deployed and URL available

### 2. Environment Variables Required

Add in Vercel Dashboard ‚Üí Settings ‚Üí Environment Variables:

```bash
VITE_API_URL=https://your-backend-url.onrender.com/api
```

### 3. Deployment Steps

1. **Install Vercel CLI (optional):**
   ```bash
   npm install -g vercel
   ```

2. **Deploy via Vercel Dashboard:**
   - Go to [vercel.com](https://vercel.com)
   - Click "Add New" ‚Üí "Project"
   - Import your GitHub repository
   - Configure:
     - **Framework Preset:** Vite
     - **Root Directory:** `frontend`
     - **Build Command:** `npm run build`
     - **Output Directory:** `dist`
     - **Install Command:** `npm install`

3. **Add Environment Variable:**
   - Go to Project Settings ‚Üí Environment Variables
   - Add `VITE_API_URL` with your Render backend URL

4. **Deploy:**
   - Click "Deploy"
   - Your frontend URL: `https://your-project.vercel.app`

**OR Deploy via CLI:**
```bash
cd frontend
vercel --prod
```

---

## üîß Post-Deployment Configuration

### 1. Update CORS in Backend

Update `backend/app.py` CORS origins:
```python
CORS(app, origins=[
    'https://your-frontend.vercel.app',
    'http://localhost:5173'  # Keep for local development
], allow_headers=['Content-Type', 'Authorization'], methods=['GET', 'POST', 'PUT', 'DELETE', 'OPTIONS'])
```

### 2. Update M-Pesa Callback URL

Update in your M-Pesa dashboard:
```
https://your-backend-url.onrender.com/api/payments/callback
```

### 3. Test Deployment

```bash
# Test backend
curl https://your-backend-url.onrender.com/api/auth/register \
  -H "Content-Type: application/json" \
  -d '{"email":"test@test.com","password":"test123","name":"Test User"}'

# Test frontend
# Open https://your-frontend.vercel.app in browser
```

---

## üìä Monitoring & Maintenance

### Render (Backend)
- **Logs:** Render Dashboard ‚Üí Your Service ‚Üí Logs
- **Metrics:** Dashboard shows CPU, Memory usage
- **Auto-deploy:** Enabled on git push to main branch

### Vercel (Frontend)
- **Deployments:** Vercel Dashboard ‚Üí Deployments
- **Analytics:** Available in dashboard
- **Auto-deploy:** Enabled on git push to main branch

---

## üêõ Troubleshooting

### Backend Issues

**Database Connection Error:**
```bash
# Check DATABASE_URL is set correctly
# Ensure PostgreSQL database is running
# Check Render logs for specific error
```

**Import Errors:**
```bash
# Ensure all dependencies in requirements.txt
# Check Python version matches runtime.txt
```

**500 Internal Server Error:**
```bash
# Check Render logs
# Verify all environment variables are set
# Test endpoints locally first
```

### Frontend Issues

**API Connection Failed:**
```bash
# Verify VITE_API_URL is correct
# Check CORS settings in backend
# Inspect browser console for errors
```

**Build Failed:**
```bash
# Check package.json scripts
# Verify all dependencies are listed
# Test build locally: npm run build
```

---

## üìù Important Notes

1. **Free Tier Limitations:**
   - Render: Service spins down after 15 min of inactivity (cold starts)
   - Vercel: 100GB bandwidth/month
   - Consider upgrading for production use

2. **Database Backups:**
   - Render provides automatic backups on paid plans
   - Export data regularly for free tier

3. **Security:**
   - Never commit `.env` files
   - Use strong SECRET_KEY values
   - Enable HTTPS only in production
   - Implement rate limiting for production

4. **Performance:**
   - Enable caching where appropriate
   - Optimize database queries
   - Use CDN for static assets
   - Monitor response times

---

## üéØ Production Checklist

Before going live:

- [ ] All environment variables configured
- [ ] Database initialized with roles and categories
- [ ] Admin user created
- [ ] CORS configured for production domain
- [ ] SSL/HTTPS enabled
- [ ] Error logging configured
- [ ] Email service configured (SendGrid)
- [ ] Payment service configured (M-Pesa)
- [ ] Image upload configured (Cloudinary)
- [ ] All tests passing
- [ ] Load testing completed
- [ ] Security audit done
- [ ] Backup strategy in place
- [ ] Monitoring setup
- [ ] Documentation updated

---

## üìû Support

For issues:
1. Check Render/Vercel logs
2. Review this deployment guide
3. Test locally first
4. Check GitHub issues

---

## üîÑ Continuous Deployment

Both Render and Vercel support automatic deployments:

1. **Push to GitHub:**
   ```bash
   git add .
   git commit -m "Your changes"
   git push origin main
   ```

2. **Auto-deploy:**
   - Render and Vercel automatically detect changes
   - Build and deploy new version
   - Zero downtime deployment

---

**Your JobLink application is now ready for deployment! üöÄ**
